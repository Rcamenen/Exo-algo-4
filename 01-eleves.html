<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Exo d'Algo(Part 4) - #01 - Les élèves</title>
    <link href="./css/style.css" rel="stylesheet" />
    <script type="text/javascript" src="./js/eleve.js"></script>
</head>
<body>
<div class="card">
    <p class="h6 font-weight-bold text-center">#01 - Les élèves</p>
    <div class="instructions">
        <p class="text-secondary">Le script que vous avez enregistré dans <em>eleve.js</em>(répertoire js) est chargé par ce fichier html 
            grace à la ligne :<br />
            <code>&lt;script type="text/javascript" src="./js/eleve.js"&gt;&lt;/script&gt;</code><br />
            La classe (ou fonction de construction) que vous avez créé(e) est donc utilisable depuis ce fichier html.</p>
        <ul class="text-secondary">
            <li>En fin de ce fichier html, dans la zone encadrée par les balises &lt;script&gt;...&lt;/script&gt;, <strong>écrire les instructions 
                qui permettent</strong> :
                <ol>
                    <li>
                        De créer les objets élèves identifiés par <em>pierreDupont</em>, <em>marieFontaine</em> et <em>johnHunter</em>.<br>
                        Vous leur attribuerez le nom et le prénom qui semblent en accord avec 
                        le nom de la variable choisi pour les identifier.<br>
                        Vous leur attribuerez la classe (Kercode, CDA, CDUI ou BTS SIO) de votre choix.<br>
                        <p class="text-danger">Les objets élèves devront être rangés dans le tableau du groupe des élèves ;  
                            ce tableau (groupeEleves) est déjà déclaré et initialisé vide.</p>
                    </li>
                    <li>
                        De lire le prénom de l'objet pierreDupont et de l'afficher dans la console,
                    </li>
                    <li>
                        De lire la classe de marieFontaine et de l'afficher dans la console,
                    </li>
                    <li>
                        D'attribuer à marieFontaine et à pierreDupont leur première note (choisie librement) en maths et d'attribuer
                        à JohnHunter un 18 en algorithmique (Bon travail !)
                    </li>
                    <li>
                        D'attribuer à tous les élèves connus leur première note en algorithmique ; la note de chaque élève 
                        sera proposée aléatoirement (le formateur est fantaisiste !) :
                        <ul>
                            <li>Écrire une fonction, nommée <em>genererNote</em>qui génère et retourne un nombre aléatoire entre 0 et 20.<br>
                                (indice : voir la méthode random de l'objet global JavaScript Math)</li>
                            <li>En utilisant la fonction <em>genererNote</em>, attribuer une note aléatoire à chaque élève (une note différente 
                                par élève) par itération sur le groupe des élèves... (Ne voyez-vous pas une boucle là-dessous ?)</li>
                        </ul>
                    </li>
                    <li>
                        De calculer la moyenne de la classe (c-à-d du groupe) en algorithmique et de l'afficher dans la console 
                        et/ou par la fonction <em>alert()</em>.
                    </li>
                </ol>
            </li>
            <li>
                Ouvrir la console (dans votre navigateur ou depuis le débugueur de VSCode) et recharger votre code.<br>
                Pour rappel, les instructions ayant été écrites hors de toute fonction, sont exécutées au chargement de la page !!!
                <p class="text-success">Tous les résultats devraient être dans la console !</p>
                <p>N'hésitez pas à utiliser cette console pour interroger les objets, 
                pour débuguer ou par curiosité !</p>
            </li>
        </ul>
    </div>

    
<script type="text/javascript">

    let groupeEleves = [];

    
    // -----------------------------------------------------
    /*
     * generateNote() génère une note en 0 et 20
     * de manière aléatoire
     * Paramètres : Elle ne prend aucun paramètre
     *  
     * Retour : Elle retourne un Integer entre 0 et 20 inclus
     */

    function genererNote () { 
        let note = Math.round(getRandom(20));
        return note;
    }

     /*
     * getRandom(max) génère un chiffre en 0 et max
     * de manière aléatoire
     * Paramètres : un entier qui sera le max du nombre généré aléatoirement
     *  
     * Retour : Elle retourne un float entre 0 et max
     */

    function getRandom(max){
        return Math.random()*max;
    }

     /*
     * addRandomNote(eleves,subject) ajoute une note aléatoire à tous les élèves
     * de manière aléatoire
     * Paramètres : un Array d'objet et la matière à laquelle affecter la note
     *  
     * Retour : Elle retourne le tableau des élèves avec les notes ajoutées
     */
    function addRandomNote(eleves,subject){
        eleves.forEach(eleve => {
            eleve.notes[subject].push(genererNote())
            });
        return eleves;
    }

    /*
    * getNotes(...) récupère les notes de tous les élèves dans une matière donnée
    * Paramètres : un tableau d'objet des élèves
    *  
    * Retour : Retourne un Array des notes demandées
    */
    function getNotes(eleves,subject){
        let notes = [];

        eleves.forEach(eleve => {
            let notesEleve = eleve.notes[subject]
            
            notesEleve.forEach(note => {
                console.log(`Ajout de la note de ${eleve.name}, la note en ${subject} est de ${note}`)
                notes.push(note);
                });

            });
        
        return notes;
    }

    /*
    * getAverage(...) calcule une moyenne
    * Paramètres : un tableau de Number
    *  
    * Retour : Retourne un Number 
    */

    function getAverage(notes){
        let sum = 0;
        notes.forEach(note => {
            sum+=note;
        })
        return sum/notes.length;
    }


    /*
    *getSum renvoi la somme des nombres d'un tableau
    *PARAMETRES : Un array de number
    * 
    * */
    function getSum(values){
        let sum = 0;
        values.forEach(value => {
            sum+=value;
        });
        return sum;
    }
    // -----------------------------------------------------

    // création des 3 élèves et rangement dans le tableau des élèves
    
    let pierreDupont = new Eleve("DUPONT","Pierre","Kercode");
    let marieFontaine = new Eleve("FONTAINE","Marie","CDUI");
    let johnHunter = new Eleve("HUNTER","John","CDA");

    groupeEleves = [pierreDupont,marieFontaine,johnHunter];

    // lecture et affichage du prénom de l'objet pierreDupont
    
    console.log(`Le nome de Pierre est : ${pierreDupont.name}`);

    // lecture et affichage de la classe de marieFontaine
    
    console.log(`La classe de Marie Fontaine est : ${marieFontaine.course}`);

    // attribution de notes en maths
    // attribution des notes en mathématique (marieFontaine et pierreDupont)

    marieFontaine.notes.maths.push(16);
    pierreDupont.notes.maths.push(14);

    // attribution de la note de 18 à johnHunter

    johnHunter.notes.algorithmique.push(18);


    // ajout d'une note aléatoire en algorithmique pour chaque élève
    
    addRandomNote(groupeEleves,"algorithmique");

    // moyenne du groupe en algorithmique

    let notes = getNotes(groupeEleves,"algorithmique")
    console.log(`La moyenne des élèves en algo est de : ${getAverage(notes)}`);
    console.log(groupeEleves);

</script>
</body>
</html>

